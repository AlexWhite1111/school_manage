# è‡ªç„¶æ•™è‚²åº”ç”¨ - æµ‹è¯•éƒ¨ç½²è¯´æ˜

## ğŸ“‹ å½“å‰é…ç½®çŠ¶æ€

### ğŸ§ª æµ‹è¯•ç¯å¢ƒé…ç½®
```
å‰ç«¯å¼€å‘æœåŠ¡å™¨: http://localhost:5173
åç«¯APIæœåŠ¡å™¨: http://localhost:3000/api  
æ•°æ®åº“: æœ¬åœ°PostgreSQL (localhost:5432)
```

### ğŸ¯ åº”ç”¨å¹³å°æ”¯æŒ
- âœ… Android APK (å·²é…ç½®)
- âœ… Windowsæ¡Œé¢åº”ç”¨ (å·²é…ç½®) 
- âœ… Webç½‘é¡µç‰ˆ (é»˜è®¤æ”¯æŒ)

## ğŸ”§ é…ç½®æ–‡ä»¶è¯´æ˜

### 1. APIé…ç½®æ–‡ä»¶
**ä½ç½®**: `src/config/api.ts` (éœ€è¦åˆ›å»º)

#### æµ‹è¯•ç¯å¢ƒé…ç½®:
```typescript
// æœ¬åœ°æµ‹è¯•é…ç½®
export const API_BASE_URL = 'http://localhost:3000/api';

export const APP_CONFIG = {
  name: 'è‡ªç„¶æ•™è‚²',
  version: '1.0.0', 
  apiBaseUrl: API_BASE_URL,
  timeout: 10000
};
```

#### ç”Ÿäº§ç¯å¢ƒé…ç½®:
```typescript
// æœåŠ¡å™¨ç”Ÿäº§é…ç½®
export const API_BASE_URL = 'http://154.194.250.93:3000/api';

export const APP_CONFIG = {
  name: 'è‡ªç„¶æ•™è‚²',
  version: '1.0.0',
  apiBaseUrl: API_BASE_URL,
  timeout: 10000
};
```

### 2. Capacitoré…ç½®
**ä½ç½®**: `capacitor.config.ts`

å½“å‰é…ç½®:
```typescript
{
  appId: 'com.alex.naturaleducation',
  appName: 'è‡ªç„¶æ•™è‚²',
  webDir: 'dist',
  server: {
    // æµ‹è¯•æ—¶æŒ‡å‘æœ¬åœ°
    url: 'http://localhost:5173',
    cleartext: true
  }
}
```

ç”Ÿäº§é…ç½®:
```typescript
{
  appId: 'com.alex.naturaleducation', 
  appName: 'è‡ªç„¶æ•™è‚²',
  webDir: 'dist',
  // ç”Ÿäº§æ—¶ç§»é™¤serveré…ç½®ï¼Œä½¿ç”¨æ‰“åŒ…åçš„é™æ€æ–‡ä»¶
}
```

## ğŸ§ª æµ‹è¯•æµç¨‹

### é˜¶æ®µ1: æœ¬åœ°åŠŸèƒ½æµ‹è¯•
1. **å¯åŠ¨åç«¯æœåŠ¡**
   ```bash
   cd backend
   npm run dev
   ```

2. **å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨**
   ```bash
   cd frontend  
   npm run dev
   ```

3. **åŠŸèƒ½éªŒè¯æ¸…å•**
   - [ ] ç”¨æˆ·ç™»å½•/æ³¨å†Œ
   - [ ] CRMå®¢æˆ·ç®¡ç†
   - [ ] å­¦ç”Ÿæ—¥å¿—ç³»ç»Ÿ
   - [ ] è´¢åŠ¡ç®¡ç†
   - [ ] æ•°æ®åˆ†æ
   - [ ] æˆé•¿è·Ÿè¸ª
   - [ ] è€ƒè¯•ç®¡ç†
   - [ ] æŠ¥è¡¨ç”Ÿæˆ

### é˜¶æ®µ2: åº”ç”¨æ„å»ºæµ‹è¯•
1. **æ„å»ºå‰ç«¯**
   ```bash
   npm run build
   ```

2. **åŒæ­¥åˆ°Capacitor**
   ```bash
   npx cap sync
   ```

3. **æ¡Œé¢åº”ç”¨æµ‹è¯•**
   ```bash
   npx cap open @capacitor-community/electron
   # åœ¨Electronçª—å£ä¸­æµ‹è¯•åº”ç”¨
   ```

4. **Androidåº”ç”¨æµ‹è¯•** (éœ€è¦Android Studio)
   ```bash
   npx cap open android
   # åœ¨Android Studioä¸­è¿è¡Œè™šæ‹Ÿæœºæµ‹è¯•
   ```

## ğŸš€ åˆ‡æ¢åˆ°ç”Ÿäº§ç¯å¢ƒ

### ç¬¬1æ­¥: ä¿®æ”¹APIé…ç½®
```bash
# ç¼–è¾‘ src/config/api.ts
# å°† localhost:3000 æ”¹ä¸º 154.194.250.93:3000
```

### ç¬¬2æ­¥: æ›´æ–°Capacitoré…ç½®
```bash
# ç¼–è¾‘ capacitor.config.ts
# ç§»é™¤serveré…ç½®é¡¹
```

### ç¬¬3æ­¥: é‡æ–°æ„å»º
```bash
npm run build
npx cap sync
```

### ç¬¬4æ­¥: æ‰“åŒ…åº”ç”¨
```bash
# Android APK
npx cap open android
# åœ¨Android Studioä¸­: Build > Build APK

# Windowså®‰è£…åŒ…
npx cap open @capacitor-community/electron  
# åœ¨Electroné¡¹ç›®ä¸­: npm run electron:pack
```

## ğŸ“± æœ€ç»ˆäº¤ä»˜æ–‡ä»¶

### Android
- `android/app/build/outputs/apk/debug/app-debug.apk` (æµ‹è¯•ç‰ˆ)
- `android/app/build/outputs/apk/release/app-release.apk` (å‘å¸ƒç‰ˆ)

### Windows
- `electron/dist/è‡ªç„¶æ•™è‚² Setup 1.0.0.exe` (å®‰è£…åŒ…)
- `electron/dist/win-unpacked/` (å…å®‰è£…ç‰ˆ)

### Webç‰ˆ
- `dist/` ç›®å½• (å¯éƒ¨ç½²åˆ°ä»»ä½•WebæœåŠ¡å™¨)

## âš ï¸ æ³¨æ„äº‹é¡¹

### æµ‹è¯•é˜¶æ®µ
- ä½¿ç”¨æœ¬åœ°æ•°æ®åº“ï¼Œæ•°æ®ä¸ä¼šä¸¢å¤±
- å¯ä»¥éšæ—¶é‡ç½®å’Œæ¸…ç†æ•°æ®
- å‰åç«¯ä»£ç ä¿®æ”¹ç«‹å³ç”Ÿæ•ˆ

### ç”Ÿäº§éƒ¨ç½²å‰æ£€æŸ¥
- [ ] ç¡®è®¤æœåŠ¡å™¨åç«¯æ­£å¸¸è¿è¡Œ
- [ ] ç¡®è®¤æœåŠ¡å™¨CORSé…ç½®æ­£ç¡®
- [ ] æµ‹è¯•ç½‘ç»œè¿æ¥ç¨³å®šæ€§
- [ ] éªŒè¯æ•°æ®åº“è¿æ¥
- [ ] ç¡®è®¤æ‰€æœ‰åŠŸèƒ½åœ¨åº”ç”¨ä¸­æ­£å¸¸

### æ•°æ®å¤‡ä»½
```bash
# æœ¬åœ°æ•°æ®åº“å¤‡ä»½
pg_dump -h localhost -U postgres education_crm_dev > backup_test.sql

# æœåŠ¡å™¨æ•°æ®åº“æ¢å¤ (å¦‚éœ€è¦)
psql -h 154.194.250.93 -U postgres education_crm < backup_test.sql
```

## ğŸ”„ å¿«é€Ÿåˆ‡æ¢è„šæœ¬

### åˆ‡æ¢åˆ°æµ‹è¯•ç¯å¢ƒ
```bash
# switch-to-test.ps1
$apiFile = "src/config/api.ts"
(Get-Content $apiFile) -replace "154.194.250.93:3000", "localhost:3000" | Set-Content $apiFile
Write-Host "å·²åˆ‡æ¢åˆ°æµ‹è¯•ç¯å¢ƒ âœ…"
```

### åˆ‡æ¢åˆ°ç”Ÿäº§ç¯å¢ƒ  
```bash
# switch-to-production.ps1
$apiFile = "src/config/api.ts"
(Get-Content $apiFile) -replace "localhost:3000", "154.194.250.93:3000" | Set-Content $apiFile
Write-Host "å·²åˆ‡æ¢åˆ°ç”Ÿäº§ç¯å¢ƒ ğŸš€"
```

---

**å½“å‰çŠ¶æ€**: ğŸ§ª æµ‹è¯•ç¯å¢ƒ (æœ¬åœ°åç«¯)
**ä¸‹ä¸€æ­¥**: å®Œæˆæœ¬åœ°åŠŸèƒ½æµ‹è¯• â†’ æ„å»ºåº”ç”¨ â†’ åˆ‡æ¢ç”Ÿäº§ç¯å¢ƒ â†’ æœ€ç»ˆéƒ¨ç½²