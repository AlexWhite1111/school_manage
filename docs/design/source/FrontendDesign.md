# 前端架构设计 (Frontend Architecture Design)

本文档基于现有技术选型（Next.js, Ant Design, Zustand）和详细的功能需求，为项目前端提供一个清晰、可扩展且高效的架构设计方案。

## 1. 核心设计原则

前端架构遵循以下核心原则：

*   **模块化与组件化:** 将UI拆分为独立的、可复用的组件，降低耦合度，提升开发效率和可维护性。
*   **响应式设计:** 确保应用在从手机到大尺寸桌面显示器等不同设备上都能提供一致且优秀的用户体验。
*   **高性能:** 利用Next.js的服务端渲染（SSR）和静态生成（SSG）能力，实现快速的页面加载和流畅的交互。
*   **卓越的用户体验 (UX):** 通过Ant Design构建专业美观的界面，并提供日间/黑夜模式切换等个性化功能，打造直观、舒适的操作体验。

## 2. 技术栈详解

我们选定的技术栈（**Next.js + Ant Design + Zustand**）为实现上述原则提供了坚实的基础。

*   **框架: Next.js (基于 React)**
    *   **文件系统路由:** `app` 目录下的文件夹结构自动映射为应用路由，清晰直观。我们将使用路由组 `(group)` 来组织公共布局，例如将所有需要登录后访问的页面放在 `/(dashboard)` 组下。
    *   **服务端组件 (RSC):** 优先使用服务端组件获取数据，可以有效减少发送到客户端的JavaScript代码量，提升首屏加载速度。对于需要用户交互的组件（如按钮、表单），则使用 `"use client"` 指令标记为客户端组件。
    *   **API 路由:** 虽然我们有独立的Express后端，但Next.js的API路由可用于处理一些简单的、仅服务于前端的逻辑，例如代理请求或处理表单。

*   **UI 组件库: Ant Design**
    *   **企业级组件:** 提供了一整套高质量的开箱即用组件（表格、表单、图表、布局等），完美匹配我们设计的看板、列表和表单功能，极大加速开发进程。
    *   **强大的主题定制:** Ant Design 5.x 引入了全新的CSS-in-JS动态主题方案。这使得实现**日间/黑夜模式切换**变得非常简单。我们只需定义两套主题Token（`token`），即可在运行时动态切换，无需重新加载页面。
    *   **响应式栅格系统:** Ant Design的 `<Grid>`、`<Row>` 和 `<Col>` 组件提供了强大的响应式布局能力，可以轻松实现“鱼骨状”布局等复杂界面在不同屏幕尺寸下的适配。

*   **状态管理: Zustand**
    *   **轻量与高效:** API简单直观，能有效管理全局状态，如“当前登录用户信息”、“全局主题（日间/黑夜）”等，而没有Redux的样板代码负担。
    *   **钩子化API:** 与React Hooks无缝集成，使用起来就像一个普通的自定义Hook，学习成本极低。

## 3. 响应式与主题化方案

### 3.1 响应式布局 (Responsive Design)

1.  **移动优先策略:** 在设计组件时，优先考虑其在小屏幕上的显示效果。
2.  **Ant Design栅格布局:** 使用 `<Row>` 和 `<Col>` 组件，并为其设置响应式参数（`xs`, `sm`, `md`, `lg`, `xl`, `xxl`），以控制不同断点下的列宽和布局。例如，一个在桌面端并排显示的卡片列表，在移动端可以自动变为单列堆叠。
3.  **隐藏/显示元素:** 利用Ant Design的响应式工具或自定义的CSS媒体查询，在特定屏幕尺寸下隐藏或显示某些元素。例如，在移动端可以将复杂的侧边栏导航默认收起，通过一个汉堡按钮来触发。
4.  **弹性布局与媒体查询:** 对于更精细的布局控制，将大量使用Flexbox和Grid布局，并配合CSS媒体查询进行微调。

### 3.2 日间/黑夜模式 (Theming)

该功能是提升用户体验的重要一环，实现流程如下：

1.  **创建主题Store:** 使用Zustand创建一个 `useThemeStore`，用于存储当前的主题模式（`'light'` 或 `'dark'`）以及切换主题的方法。
2.  **持久化存储:** 将用户选择的主题模式保存在浏览器的 `localStorage` 中，以便用户下次访问时能记住其偏好。
3.  **Ant Design主题配置:** 在应用的根组件（`app/layout.tsx`），使用Ant Design的 `<ConfigProvider>` 组件包裹整个应用。`ConfigProvider` 的 `theme` 属性将接收一个包含 `token` 和 `algorithm` 的配置对象。
4.  **动态切换:**
    *   `useThemeStore` 中的切换方法会更新Zustand中的状态。
    *   根组件监听到 `useThemeStore` 的变化，并根据新的主题模式，向 `<ConfigProvider>` 传递对应的主题算法（`theme.darkAlgorithm` 或 `theme.defaultAlgorithm`）。
    *   Ant Design会自动重新计算所有组件的样式，实现全局主题的瞬间切换。

