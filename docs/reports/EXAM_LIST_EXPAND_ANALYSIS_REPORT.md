# è€ƒè¯•åˆ†æé¡µé¢ - è€ƒè¯•åˆ—è¡¨å±•å¼€åŠŸèƒ½åˆ†ææŠ¥å‘Š

## åŠŸèƒ½å®šä½

ğŸ“ **ä½ç½®**: `Project4/frontend/src/features/analytics/components/ExamAnalyticsTab.tsx`  
ğŸ¯ **ç»„ä»¶**: è€ƒè¯•åˆ†æé¡µé¢çš„è€ƒè¯•åˆ—è¡¨è¡¨æ ¼  
â• **å°åŠ å·**: è¡¨æ ¼è¡Œå‰çš„å±•å¼€/æ”¶èµ·æŒ‰é’®

## åŠŸèƒ½ä½œç”¨

### 1. **å±•å¼€è§¦å‘æœºåˆ¶**

**é…ç½®ä½ç½®**: ç¬¬608-615è¡Œ
```typescript
expandable={{
  expandedRowKeys: expandedRows,        // å½“å‰å±•å¼€çš„è¡ŒIDæ•°ç»„
  onExpand: handleTableExpand,          // å±•å¼€/æ”¶èµ·äº‹ä»¶å¤„ç†
  expandedRowRender: renderExpandedRow, // å±•å¼€å†…å®¹æ¸²æŸ“å‡½æ•°
  expandRowByClick: false,              // ä¸å…è®¸ç‚¹å‡»è¡Œå±•å¼€
  rowExpandable: (record) => (record.subjects && record.subjects.length > 0) || true
}}
```

### 2. **å±•å¼€å¤„ç†é€»è¾‘**

**å‡½æ•°**: `handleTableExpand` (ç¬¬250-258è¡Œ)
```typescript
const handleTableExpand = (expanded: boolean, record: Exam) => {
  if (expanded) {
    setExpandedRows(prev => [...prev, record.id]);  // æ·»åŠ åˆ°å±•å¼€åˆ—è¡¨
    loadExamDetails(record.id);                     // ğŸ”‘ å¼‚æ­¥åŠ è½½è€ƒè¯•è¯¦æƒ…
  } else {
    setExpandedRows(prev => prev.filter(id => id !== record.id)); // ä»å±•å¼€åˆ—è¡¨ç§»é™¤
  }
};
```

### 3. **æ•°æ®åŠ è½½è¿‡ç¨‹**

**å‡½æ•°**: `loadExamDetails` (ç¬¬235-248è¡Œ)
- **ç¼“å­˜æœºåˆ¶**: å·²åŠ è½½è¿‡çš„è€ƒè¯•è¯¦æƒ…ä¸ä¼šé‡å¤è¯·æ±‚
- **APIè°ƒç”¨**: `examApi.getExamDetails(examId)` 
- **åŠ è½½çŠ¶æ€**: æ˜¾ç¤ºåŠ è½½åŠ¨ç”»ï¼Œå¤„ç†é”™è¯¯æƒ…å†µ

### 4. **å±•å¼€å†…å®¹æ˜¾ç¤º**

**å‡½æ•°**: `renderExpandedRow` (ç¬¬277-357è¡Œ)

#### **A. åŠ è½½çŠ¶æ€**
```typescript
if (loading) {
  return (
    <Spin size="small" />
    <span>åŠ è½½ç§‘ç›®è¯¦æƒ…ä¸­...</span>
  );
}
```

#### **B. ç§‘ç›®æˆç»©ç»Ÿè®¡å¡ç‰‡**
å±•å¼€åæ˜¾ç¤ºè¯¥è€ƒè¯•æ‰€æœ‰ç§‘ç›®çš„è¯¦ç»†ç»Ÿè®¡ï¼š

```typescript
{details.subjects.map(subject => {
  const stats = details.subjectStats[subject];
  
  return (
    <Card size="small">
      <Tag color="blue">{subjectLabels[subject]}</Tag>
      <Statistic
        title="å¹³å‡åˆ†"
        value={averagePercent}
        suffix="%"
        valueStyle={{ 
          color: averagePercent >= 80 ? green : 
                 averagePercent >= 60 ? orange : red
        }}
      />
      <div>
        <div>å‚ä¸: {stats.recordedScores}/{stats.totalStudents} ({participationRate}%)</div>
        <div>ç¼ºè€ƒ: {stats.absentCount}äºº</div>
        <div>æœ€é«˜: {stats.highest}åˆ† | æœ€ä½: {stats.lowest}åˆ†</div>
      </div>
      <Button onClick={() => showSubjectTrend(subject, record.classId, className)}>
        æŸ¥çœ‹è¶‹åŠ¿
      </Button>
    </Card>
  );
})}
```

## å±•å¼€å†…å®¹è¯¦è§£

### ğŸ“Š **ç§‘ç›®ç»Ÿè®¡ä¿¡æ¯**

æ¯ä¸ªç§‘ç›®å¡ç‰‡æ˜¾ç¤ºï¼š

1. **åŸºç¡€ä¿¡æ¯**:
   - ğŸ·ï¸ **ç§‘ç›®æ ‡ç­¾**: è¯­æ–‡ã€æ•°å­¦ã€è‹±è¯­ç­‰
   - ğŸ“ˆ **å¹³å‡åˆ†ç™¾åˆ†æ¯”**: æ¢ç®—ä¸ºç™¾åˆ†åˆ¶æ˜¾ç¤º
   - ğŸ¨ **é¢œè‰²ç¼–ç **: 80%+ç»¿è‰²ï¼Œ60-80%æ©™è‰²ï¼Œ<60%çº¢è‰²

2. **å‚ä¸ç»Ÿè®¡**:
   - ğŸ‘¥ **å‚ä¸äººæ•°**: `å½•å…¥æˆç»©æ•°/æ€»å­¦ç”Ÿæ•° (å‚ä¸ç‡%)`
   - âŒ **ç¼ºè€ƒäººæ•°**: æœªå‚åŠ è€ƒè¯•çš„å­¦ç”Ÿæ•°é‡
   - ğŸ” **æœ€é«˜åˆ†**: è¯¥ç§‘ç›®æœ€é«˜åˆ†
   - ğŸ”» **æœ€ä½åˆ†**: è¯¥ç§‘ç›®æœ€ä½åˆ†

3. **æ“ä½œæŒ‰é’®**:
   - ğŸ“ˆ **æŸ¥çœ‹è¶‹åŠ¿**: ç‚¹å‡»å¯æŸ¥çœ‹è¯¥ç§‘ç›®çš„å†å²è¶‹åŠ¿åˆ†æ

### ğŸ¯ **ç”¨æˆ·ä»·å€¼**

1. **å¿«é€Ÿæ¦‚è§ˆ**: æ— éœ€ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µï¼Œç›´æ¥åœ¨åˆ—è¡¨ä¸­æŸ¥çœ‹è€ƒè¯•æ¦‚å†µ
2. **å¤šç§‘ç›®å¯¹æ¯”**: åŒæ—¶æ˜¾ç¤ºæ‰€æœ‰ç§‘ç›®ï¼Œä¾¿äºæ¨ªå‘å¯¹æ¯”åˆ†æ
3. **å…³é”®æŒ‡æ ‡**: é‡ç‚¹æ˜¾ç¤ºå¹³å‡åˆ†ã€å‚ä¸ç‡ç­‰æ ¸å¿ƒæŒ‡æ ‡
4. **è§†è§‰å‹å¥½**: é¢œè‰²ç¼–ç å¸®åŠ©å¿«é€Ÿè¯†åˆ«æˆç»©æ°´å¹³
5. **æ·±åº¦åˆ†æ**: æä¾›è¶‹åŠ¿åˆ†æå…¥å£

## æŠ€æœ¯å®ç°äº®ç‚¹

### 1. **æ€§èƒ½ä¼˜åŒ–**
- âœ… **æ‡’åŠ è½½**: åªåœ¨å±•å¼€æ—¶æ‰è¯·æ±‚è¯¦ç»†æ•°æ®
- âœ… **ç¼“å­˜æœºåˆ¶**: å·²åŠ è½½çš„æ•°æ®ä¸ä¼šé‡å¤è¯·æ±‚
- âœ… **çŠ¶æ€ç®¡ç†**: ç‹¬ç«‹ç®¡ç†æ¯ä¸ªè€ƒè¯•çš„åŠ è½½çŠ¶æ€

### 2. **ç”¨æˆ·ä½“éªŒ**
- âœ… **åŠ è½½åé¦ˆ**: å±•å¼€æ—¶æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
- âœ… **é”™è¯¯å¤„ç†**: åŠ è½½å¤±è´¥æ—¶æ˜¾ç¤ºå‹å¥½æç¤º
- âœ… **å“åº”å¼è®¾è®¡**: é€‚é…ä¸åŒå±å¹•å°ºå¯¸

### 3. **æ•°æ®å¤„ç†**
- âœ… **æ•°æ®è½¬æ¢**: åŸå§‹åˆ†æ•°è½¬æ¢ä¸ºç™¾åˆ†æ¯”æ˜¾ç¤º
- âœ… **æ•°æ®è®¡ç®—**: å®æ—¶è®¡ç®—å‚ä¸ç‡ã€å¹³å‡åˆ†ç­‰æŒ‡æ ‡
- âœ… **ç©ºæ•°æ®å¤„ç†**: ä¼˜é›…å¤„ç†æ— æ•°æ®æƒ…å†µ

## æ”¹è¿›å»ºè®®

### 1. **åŠŸèƒ½å¢å¼º**
- ğŸ“ˆ **å›¾è¡¨é¢„è§ˆ**: åœ¨å±•å¼€åŒºåŸŸæ˜¾ç¤ºç§‘ç›®æˆç»©åˆ†å¸ƒå›¾
- ğŸ” **å­¦ç”Ÿæ˜ç»†**: æä¾›æŸ¥çœ‹è¯¥è€ƒè¯•å­¦ç”Ÿæˆç»©æ˜ç»†çš„å…¥å£
- ğŸ“Š **å¯¹æ¯”åˆ†æ**: æ”¯æŒå¤šä¸ªè€ƒè¯•å±•å¼€çŠ¶æ€åŒæ—¶å¯¹æ¯”

### 2. **æ€§èƒ½ä¼˜åŒ–**
- âš¡ **é¢„åŠ è½½**: å¯é€‰çš„é¢„åŠ è½½æœ€è¿‘å‡ æ¬¡è€ƒè¯•æ•°æ®
- ğŸ’¾ **æœ¬åœ°ç¼“å­˜**: ä½¿ç”¨localStorageç¼“å­˜è€ƒè¯•æ•°æ®
- ğŸ”„ **å¢é‡æ›´æ–°**: æ”¯æŒæ•°æ®å¢é‡æ›´æ–°è€Œéå…¨é‡åˆ·æ–°

### 3. **äº¤äº’ä¼˜åŒ–**
- ğŸ–±ï¸ **æ‰¹é‡æ“ä½œ**: æ”¯æŒæ‰¹é‡å±•å¼€/æ”¶èµ·
- âŒ¨ï¸ **é”®ç›˜æ“ä½œ**: æ”¯æŒé”®ç›˜å¿«æ·é”®æ§åˆ¶å±•å¼€
- ğŸ“± **ç§»åŠ¨ä¼˜åŒ–**: æ”¹è¿›ç§»åŠ¨ç«¯çš„å±•å¼€ä½“éªŒ

## æ€»ç»“

è€ƒè¯•åˆ—è¡¨çš„å°åŠ å·æ˜¯ä¸€ä¸ª**é«˜ä»·å€¼çš„äº¤äº’åŠŸèƒ½**ï¼Œå®ƒé€šè¿‡å±•å¼€æœºåˆ¶ä¸ºç”¨æˆ·æä¾›äº†ï¼š

- ğŸ¯ **å³æ—¶ä¿¡æ¯**: æ— éœ€é¡µé¢è·³è½¬å³å¯æŸ¥çœ‹è€ƒè¯•è¯¦æƒ…
- ğŸ“Š **å¤šç»´åº¦æ•°æ®**: ç§‘ç›®æˆç»©ã€å‚ä¸æƒ…å†µã€ç»Ÿè®¡æŒ‡æ ‡ä¸€ç›®äº†ç„¶
- ğŸš€ **é«˜æ•ˆåˆ†æ**: æ”¯æŒå¿«é€Ÿå¯¹æ¯”å¤šä¸ªè€ƒè¯•çš„è¡¨ç°
- ğŸ’¡ **æ™ºèƒ½è®¾è®¡**: æ‡’åŠ è½½å’Œç¼“å­˜ä¿è¯äº†è‰¯å¥½çš„æ€§èƒ½ä½“éªŒ

è¿™ä¸ªåŠŸèƒ½å¾ˆå¥½åœ°å¹³è¡¡äº†**ä¿¡æ¯å¯†åº¦**å’Œ**ç”¨æˆ·ä½“éªŒ**ï¼Œæ˜¯æ•°æ®åˆ†æç•Œé¢çš„ä¼˜ç§€è®¾è®¡å®è·µã€‚

---

**æ–‡æ¡£æ›´æ–°æ—¶é—´**: å½“å‰  
**åŠŸèƒ½çŠ¶æ€**: âœ… æ­£å¸¸è¿è¡Œ  
**ä¼˜å…ˆçº§**: ä¸­ç­‰ï¼ˆåŠŸèƒ½å®Œå–„ï¼Œå¯è€ƒè™‘å¢å¼ºï¼‰ 