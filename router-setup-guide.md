# 🌐 路由器端口转发配置指南

## 📊 您的网络信息
- **公网IP**: `42.227.147.38`
- **本机IP**: `192.168.0.216`
- **路由器IP**: `192.168.0.1`

## 🔧 配置步骤

### 1. 登录路由器管理界面
1. 打开浏览器，访问：http://192.168.0.1
2. 输入路由器管理员账号密码（通常在路由器背面标签上）

### 2. 找到端口转发设置
根据路由器品牌，设置位置可能在：
- **TP-Link**: 高级设置 → NAT转发 → 虚拟服务器
- **华为/荣耀**: 更多功能 → 安全设置 → 虚拟服务器
- **小米**: 高级设置 → 端口转发
- **网件**: 动态DNS → 端口转发/端口触发
- **华硕**: 外部网络(WAN) → 虚拟服务器/端口转发

### 3. 添加端口转发规则

需要添加以下3条规则：

#### 规则1: HTTP服务 (统一入口)
- **服务名称**: Project4-HTTP
- **外部端口**: 80
- **内部IP**: 192.168.0.216
- **内部端口**: 80
- **协议**: TCP
- **状态**: 启用

#### 规则2: 后端API服务
- **服务名称**: Project4-Backend
- **外部端口**: 3000
- **内部IP**: 192.168.0.216
- **内部端口**: 3000
- **协议**: TCP
- **状态**: 启用

#### 规则3: 前端服务
- **服务名称**: Project4-Frontend
- **外部端口**: 5173
- **内部IP**: 192.168.0.216
- **内部端口**: 5173
- **协议**: TCP
- **状态**: 启用

### 4. 保存并重启路由器
1. 保存所有配置
2. 重启路由器以确保设置生效

## 🧪 配置验证

配置完成后，可以通过以下方式验证：

1. **在线端口检测工具**:
   - 访问：https://tool.chinaz.com/port/
   - 输入您的公网IP: 42.227.147.38
   - 检测端口：80, 3000, 5173

2. **手机流量测试**:
   - 关闭手机WiFi，使用移动网络
   - 访问：http://42.227.147.38:5173

## ⚠️ 注意事项

1. **公网IP变化**: 家庭宽带的公网IP可能会变化，如果发现无法访问，请重新获取公网IP
2. **运营商限制**: 部分运营商可能限制80端口，如果80端口无法访问，可以改用8080端口
3. **安全考虑**: 公网暴露服务有安全风险，建议只在测试期间开启

## 🔧 常见问题排查

### 问题1: 外网无法访问
- 检查路由器端口转发是否正确配置
- 确认Windows防火墙已开放对应端口
- 验证本机服务是否正常运行

### 问题2: 80端口被运营商屏蔽
如果80端口无法使用，可以修改为8080：
1. 修改路由器转发规则：外部端口改为8080
2. 访问地址改为：http://137.184.237.130:8080

### 问题3: 公网IP变化
如果公网IP发生变化：
1. 重新获取公网IP: `curl -s http://icanhazip.com`
2. 更新应用配置中的API地址
3. 通知用户使用新的IP地址访问

## 📱 最终访问地址

配置完成后，外网用户可以通过以下地址访问：
- **前端应用**: http://42.227.147.38:5173
- **后端API**: http://42.227.147.38:3000
- **统一入口**: http://42.227.147.38:80

---
**配置完成后记得测试所有服务是否正常工作！**